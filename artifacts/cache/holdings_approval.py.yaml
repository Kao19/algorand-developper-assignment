filename: holdings_approval.py
timestamp: 1660821515
compiled: BiADAQAEJgIRYXNzZXRDdXJyZW50UHJpY2UHYXNzZXRJRDEYIxJAAR0xGSISQAEOMRmBAhJAAQQxGSQSQAD7MRmBBRJAAPExGSMSQAABADEgMgMSMQkyAxIQMRUyAxIQRDYaAIAFb3B0aW4SQACkNhoAgAtVcGRhdGVQcmljZRJAAHA2GgCACHB1cmNoYXNlEkAAAQAxIDIDEjEJMgMSEDEVMgMSEEQyCilkcAA1ATUANAFENAA3AhoBFw9ENwIaAReB6AcORDMBAGAzAQB4CShkNwIaARcLD0SxJLIQMwIAshQ3AhoBF7ISNwIwALIRsyJDMSAyAxIxCTIDEhAxFTIDEhBEMQAyCRJEKDYaARdnIkMxIDIDEjEJMgMSEDEVMgMSEESxJLIQMgqyFCOyEjYwALIRsyJDI0MjQyJDMQAxGGFEIkMxIDIDEjEJMgMSEDEVMgMSEEQpNhoAF2cogcCWsQJnIkM=
compiledHash: E4J75IHN3SI4Q47ZWXW55H6KY3V6QZ7GJEPA22QW4SG2PRAM4OKQZJ5QQY
srcHash: 265572490
base64ToBytes:
    - 6
    - 32
    - 3
    - 1
    - 0
    - 4
    - 38
    - 2
    - 17
    - 97
    - 115
    - 115
    - 101
    - 116
    - 67
    - 117
    - 114
    - 114
    - 101
    - 110
    - 116
    - 80
    - 114
    - 105
    - 99
    - 101
    - 7
    - 97
    - 115
    - 115
    - 101
    - 116
    - 73
    - 68
    - 49
    - 24
    - 35
    - 18
    - 64
    - 1
    - 29
    - 49
    - 25
    - 34
    - 18
    - 64
    - 1
    - 14
    - 49
    - 25
    - 129
    - 2
    - 18
    - 64
    - 1
    - 4
    - 49
    - 25
    - 36
    - 18
    - 64
    - 0
    - 251
    - 49
    - 25
    - 129
    - 5
    - 18
    - 64
    - 0
    - 241
    - 49
    - 25
    - 35
    - 18
    - 64
    - 0
    - 1
    - 0
    - 49
    - 32
    - 50
    - 3
    - 18
    - 49
    - 9
    - 50
    - 3
    - 18
    - 16
    - 49
    - 21
    - 50
    - 3
    - 18
    - 16
    - 68
    - 54
    - 26
    - 0
    - 128
    - 5
    - 111
    - 112
    - 116
    - 105
    - 110
    - 18
    - 64
    - 0
    - 164
    - 54
    - 26
    - 0
    - 128
    - 11
    - 85
    - 112
    - 100
    - 97
    - 116
    - 101
    - 80
    - 114
    - 105
    - 99
    - 101
    - 18
    - 64
    - 0
    - 112
    - 54
    - 26
    - 0
    - 128
    - 8
    - 112
    - 117
    - 114
    - 99
    - 104
    - 97
    - 115
    - 101
    - 18
    - 64
    - 0
    - 1
    - 0
    - 49
    - 32
    - 50
    - 3
    - 18
    - 49
    - 9
    - 50
    - 3
    - 18
    - 16
    - 49
    - 21
    - 50
    - 3
    - 18
    - 16
    - 68
    - 50
    - 10
    - 41
    - 100
    - 112
    - 0
    - 53
    - 1
    - 53
    - 0
    - 52
    - 1
    - 68
    - 52
    - 0
    - 55
    - 2
    - 26
    - 1
    - 23
    - 15
    - 68
    - 55
    - 2
    - 26
    - 1
    - 23
    - 129
    - 232
    - 7
    - 14
    - 68
    - 51
    - 1
    - 0
    - 96
    - 51
    - 1
    - 0
    - 120
    - 9
    - 40
    - 100
    - 55
    - 2
    - 26
    - 1
    - 23
    - 11
    - 15
    - 68
    - 177
    - 36
    - 178
    - 16
    - 51
    - 2
    - 0
    - 178
    - 20
    - 55
    - 2
    - 26
    - 1
    - 23
    - 178
    - 18
    - 55
    - 2
    - 48
    - 0
    - 178
    - 17
    - 179
    - 34
    - 67
    - 49
    - 32
    - 50
    - 3
    - 18
    - 49
    - 9
    - 50
    - 3
    - 18
    - 16
    - 49
    - 21
    - 50
    - 3
    - 18
    - 16
    - 68
    - 49
    - 0
    - 50
    - 9
    - 18
    - 68
    - 40
    - 54
    - 26
    - 1
    - 23
    - 103
    - 34
    - 67
    - 49
    - 32
    - 50
    - 3
    - 18
    - 49
    - 9
    - 50
    - 3
    - 18
    - 16
    - 49
    - 21
    - 50
    - 3
    - 18
    - 16
    - 68
    - 177
    - 36
    - 178
    - 16
    - 50
    - 10
    - 178
    - 20
    - 35
    - 178
    - 18
    - 54
    - 48
    - 0
    - 178
    - 17
    - 179
    - 34
    - 67
    - 35
    - 67
    - 35
    - 67
    - 34
    - 67
    - 49
    - 0
    - 49
    - 24
    - 97
    - 68
    - 34
    - 67
    - 49
    - 32
    - 50
    - 3
    - 18
    - 49
    - 9
    - 50
    - 3
    - 18
    - 16
    - 49
    - 21
    - 50
    - 3
    - 18
    - 16
    - 68
    - 41
    - 54
    - 26
    - 0
    - 23
    - 103
    - 40
    - 129
    - 192
    - 150
    - 177
    - 2
    - 103
    - 34
    - 67
tealCode: "#pragma version 6\r

    txn ApplicationID\r

    int 0\r

    ==\r

    bnz main_l18\r

    txn OnCompletion\r

    int OptIn\r

    ==\r

    bnz main_l17\r

    txn OnCompletion\r

    int CloseOut\r

    ==\r

    bnz main_l16\r

    txn OnCompletion\r

    int UpdateApplication\r

    ==\r

    bnz main_l15\r

    txn OnCompletion\r

    int DeleteApplication\r

    ==\r

    bnz main_l14\r

    txn OnCompletion\r

    int NoOp\r

    ==\r

    bnz main_l7\r

    err\r

    main_l7:\r

    txn RekeyTo\r

    global ZeroAddress\r

    ==\r

    txn CloseRemainderTo\r

    global ZeroAddress\r

    ==\r

    &&\r

    txn AssetCloseTo\r

    global ZeroAddress\r

    ==\r

    &&\r

    assert\r

    txna ApplicationArgs 0\r

    byte \"optin\"\r

    ==\r

    bnz main_l13\r

    txna ApplicationArgs 0\r

    byte \"UpdatePrice\"\r

    ==\r

    bnz main_l12\r

    txna ApplicationArgs 0\r

    byte \"purchase\"\r

    ==\r

    bnz main_l11\r

    err\r

    main_l11:\r

    txn RekeyTo\r

    global ZeroAddress\r

    ==\r

    txn CloseRemainderTo\r

    global ZeroAddress\r

    ==\r

    &&\r

    txn AssetCloseTo\r

    global ZeroAddress\r

    ==\r

    &&\r

    assert\r

    global CurrentApplicationAddress\r

    byte \"assetID\"\r

    app_global_get\r

    asset_holding_get AssetBalance\r

    store 1\r

    store 0\r

    load 1\r

    assert\r

    load 0\r

    gtxna 2 ApplicationArgs 1\r

    btoi\r

    >=\r

    assert\r

    gtxna 2 ApplicationArgs 1\r

    btoi\r

    int 1000\r

    <=\r

    assert\r

    gtxn 1 Sender\r

    balance\r

    gtxn 1 Sender\r

    min_balance\r

    -\r

    byte \"assetCurrentPrice\"\r

    app_global_get\r

    gtxna 2 ApplicationArgs 1\r

    btoi\r

    *\r

    >=\r

    assert\r

    itxn_begin\r

    int axfer\r

    itxn_field TypeEnum\r

    gtxn 2 Sender\r

    itxn_field AssetReceiver\r

    gtxna 2 ApplicationArgs 1\r

    btoi\r

    itxn_field AssetAmount\r

    gtxna 2 Assets 0\r

    itxn_field XferAsset\r

    itxn_submit\r

    int 1\r

    return\r

    main_l12:\r

    txn RekeyTo\r

    global ZeroAddress\r

    ==\r

    txn CloseRemainderTo\r

    global ZeroAddress\r

    ==\r

    &&\r

    txn AssetCloseTo\r

    global ZeroAddress\r

    ==\r

    &&\r

    assert\r

    txn Sender\r

    global CreatorAddress\r

    ==\r

    assert\r

    byte \"assetCurrentPrice\"\r

    txna ApplicationArgs 1\r

    btoi\r

    app_global_put\r

    int 1\r

    return\r

    main_l13:\r

    txn RekeyTo\r

    global ZeroAddress\r

    ==\r

    txn CloseRemainderTo\r

    global ZeroAddress\r

    ==\r

    &&\r

    txn AssetCloseTo\r

    global ZeroAddress\r

    ==\r

    &&\r

    assert\r

    itxn_begin\r

    int axfer\r

    itxn_field TypeEnum\r

    global CurrentApplicationAddress\r

    itxn_field AssetReceiver\r

    int 0\r

    itxn_field AssetAmount\r

    txna Assets 0\r

    itxn_field XferAsset\r

    itxn_submit\r

    int 1\r

    return\r

    main_l14:\r

    int 0\r

    return\r

    main_l15:\r

    int 0\r

    return\r

    main_l16:\r

    int 1\r

    return\r

    main_l17:\r

    txn Sender\r

    txn ApplicationID\r

    app_opted_in\r

    assert\r

    int 1\r

    return\r

    main_l18:\r

    txn RekeyTo\r

    global ZeroAddress\r

    ==\r

    txn CloseRemainderTo\r

    global ZeroAddress\r

    ==\r

    &&\r

    txn AssetCloseTo\r

    global ZeroAddress\r

    ==\r

    &&\r

    assert\r

    byte \"assetID\"\r

    txna ApplicationArgs 0\r

    btoi\r

    app_global_put\r

    byte \"assetCurrentPrice\"\r

    int 5000000\r

    app_global_put\r

    int 1\r

    return\r\n"
